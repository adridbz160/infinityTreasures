---
import Layout from "../layouts/Layout.astro";
import "../styles/perfil.css";
import { parse } from "cookie";

// Verificamos si el usuario está logueado.
const cookies = parse(Astro.request.headers.get("cookie") || "");
const session = cookies.session;

if (!session) {
  // Si no está logueado, lo redirigimos a /acceso
  Astro.redirect("/acceso");
}
---

<Layout>
  <main>
    <h1>Bienvenido a tu Perfil</h1>
    <section>
      <h2>Información de Usuario</h2>
      <!-- Aquí puedes añadir más detalles sobre el usuario -->
      <p>Tu información se muestra aquí...</p>

      <a href="/api/logout">Cerrar sesión</a>
      <!-- Enlace para cerrar sesión -->
    </section>
  </main>
</Layout>
